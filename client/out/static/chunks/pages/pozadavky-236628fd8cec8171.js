(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{9923:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pozadavky",function(){return a(2542)}])},2542:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var i=a(5893),n=a(7294),r=a(7357),l=a(7296),s=a(9108);let d=e=>{let t=e.split("-");return"".concat(t[2],"-").concat(t[1],"-").concat(t[0])},c=e=>{let t;switch(e){case s.Q_.NEW:t=s.l$.NEW;break;case s.Q_.APPROVED:t=s.l$.APPROVED;break;case s.Q_.DECLINED:t=s.l$.DECLINED;break;default:t=""}return t},o=async(e,t)=>{let a;t==s.Q_.APPROVED&&(a=s.Q_.APPROVED),t==s.Q_.DECLINED&&(a=s.Q_.DECLINED);let i={id:e,status:a},n=JSON.stringify(i),r=await fetch("http://localhost:4000/inquiries/update",{method:"PUT",headers:{Authorization:"Bearer ".concat("7MU9AyKTLE"),"Content-Type":"application/json"},body:n}),l=await r.json();return l},u=async()=>{let e=await fetch("http://localhost:4000/inquiries",{method:"GET",headers:{Authorization:"Bearer ".concat("7MU9AyKTLE")}}),t=await e.json();return console.log(t),t};var h=a(9417),E=a(5582),_=a(6886),p=a(8262),x=a(9581),N=a(8951),f=a(1425),m=a(888),v=a(896);function T(e){let{value:t,inquiryId:a,inquiries:r,setInquiries:l}=e,[d,E]=(0,n.useState)(!1),T=async()=>{await o(a,s.Q_.DECLINED),E(!1),j()},D=async()=>{await o(a,s.Q_.APPROVED),E(!1),j()},j=async()=>{let e=await u();l(e)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(_.ZP,{container:!0,spacing:1,children:[(0,i.jsx)(_.ZP,{item:!0,xs:12,children:(0,i.jsx)(h.Z,{variant:"outlined",color:"primary",style:{fontSize:"12px",padding:"2px 4px"},children:c(t)})}),(0,i.jsx)(_.ZP,{item:!0,xs:12,children:(0,i.jsx)(h.Z,{variant:"outlined",onClick:()=>{E(!0)},style:{fontSize:"12px",padding:"2px 4px"},children:s.KL.HANDLE_INQUIRY})}),(0,i.jsxs)(p.Z,{open:d,onClose:()=>{E(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,i.jsx)(x.Z,{children:(0,i.jsx)(N.Z,{id:"alert-dialog-description",children:s.KL.HANDLE_INQUIRY_NOTE})}),(0,i.jsx)(f.Z,{children:(0,i.jsxs)(_.ZP,{item:!0,xs:12,className:"flex gap-x-2 justify-center align-center",children:[(0,i.jsxs)(h.Z,{onClick:D,color:"success",variant:"outlined",children:[s.KL.APPROVE,(0,i.jsx)(m.Z,{color:"success",style:{marginLeft:"4px"}})]}),(0,i.jsxs)(h.Z,{onClick:T,color:"error",variant:"outlined",children:[s.KL.DECLINE,(0,i.jsx)(v.Z,{style:{transform:"rotateZ(45deg)"},color:"error"})]})]})})]})]})})}var D=a(3299);function j(){let[e,t]=(0,n.useState)([]),{status:a,data:o}=(0,D.useSession)();(0,n.useEffect)(()=>{"authenticated"===a&&p()},[a]);let _=e=>{t(e)},p=async()=>{let e=await u();_(e)};if("authenticated"===a)return(0,i.jsx)(i.Fragment,{children:e.length>0?(0,i.jsx)(r.Z,{sx:{width:"100%"},className:"p-8",children:(0,i.jsx)(l._$,{rows:e,rowSelection:!1,initialState:{pagination:{paginationModel:{pageSize:5}}},rowHeight:75,pageSizeOptions:[5],columns:[{field:"order_name",headerName:s.dT.ORDER_NAME},{field:"order_contact",headerName:s.dT.ORDER_CONTACT},{field:"item_title",headerName:s.dT.ITEM,minWidth:150},{field:"request_date",headerName:s.dT.REQUEST_DATE,minWidth:150,valueGetter:e=>e.value?d(e.value.split("T")[0]):e.value},{field:"pause_start_date",headerName:s.dT.PAUSE_START_DATE,minWidth:150,valueGetter:e=>e.value?d(e.value):e.value},{field:"pause_end_date",headerName:s.dT.PAUSE_END_DATE,minWidth:150,valueGetter:e=>e.value?d(e.value):e.value},{field:"new_end_date",headerName:s.dT.NEW_END_DATE,minWidth:150,valueGetter:e=>e.value?d(e.value):e.value},{field:"status",headerName:s.dT.STATUS,minWidth:150,flex:1,renderCell:a=>(0,i.jsx)(i.Fragment,{children:a.value==s.Q_.NEW?(0,i.jsx)(T,{value:a.value,inquiryId:a.row.id,inquiries:e,setInquiries:t}):(0,i.jsx)(h.Z,{variant:"outlined",color:a.value==s.Q_.APPROVED?"success":"error",style:{fontSize:"12px",padding:"2px 4px"},children:c(a.value)})})}]})}):(0,i.jsx)(E.Z,{className:"text-center p-10",children:s.KL.NO_INQUIRIES})})}}},function(e){e.O(0,[525,297,774,888,179],function(){return e(e.s=9923)}),_N_E=e.O()}]);